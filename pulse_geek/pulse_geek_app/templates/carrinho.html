{% load static %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="user-scalable=no">

    <link rel="icon" href="{% static 'img/icons/d20.png' %}" type="image/png">
    <title>Pulse Geek - Meu carrinho</title>

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}" type="text/css">

    <!-- Fontes Google -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Comfortaa' rel='stylesheet'>

</head>

<body>
    <div id="overlay" class="overlay"></div>
    <header class="mobileHeader">
        <!-- Nav para dispositivos com mais de 700px de largura -->
        <nav class="navDesck">
            <div class="containerLogo">
                <a href="{% url 'inicio' %}">
                    <img src="{% static 'img/logo.png' %}" title="Logo da Pulse Geek" alt="Logo">
                </a>
            </div>

            <div class="containerIcons">
                <img src="{% static 'img/icons/menubranco.png' %}" alt="Icon Menu" id="menuIcon">
                <div id="menuSuspenso" class="estiloMenu">
                    <ul style="color: #666;">
                        <li class="barrasMenu borda" id="cardsMenu">CARDS
                            <ul class="submenu">
                                <li class="barrasMenu borda">CARDS</li>
                                <li class="barrasMenu borda">DECKS</li>
                                <li class="barrasMenu borda">BOOSTER PACKS</li>
                                <li class="barrasMenu">EQUIPAMENTOS</li>
                            </ul>
                        </li>
                        <li class="barrasMenu borda" id="rpgMenu">RPG
                            <ul class="submenu">
                                <li class="barrasMenu borda">DADOS</li>
                                <li class="barrasMenu borda">LIVROS</li>
                                <li class="barrasMenu">ACESSORIOS</li>
                            </ul>
                        </li>
                        <li class="barrasMenu">COLECIONÁVEIS</li>
                    </ul>
                </div>
            </div>

            <div class="containerBusca">
                <input type="text" id="txtBusca" placeholder="Pesquisar..." />
                <div class="lupa">
                    <center>
                        <img src="{% static 'img/icons/lupa.png' %}" id="iconLupa" alt="Ícone de Lupa">
                    </center>
                </div>
            </div>

            <div class="containerIcons">
                <a href="{% url 'pag-carrinho' %}"><img src="{% static 'img/icons/carrinhobranco.png' %}"
                        alt="Icon Carrinho"></a>
            </div>

            <div class="containerIcons">
                <a href="{% url 'pag-cadastro' %}"><img src="{% static 'img/icons/adicionar-usuario.png' %}"
                        alt="Icon Add Usuário" id="menuIcon"></a>
            </div>
        </nav>


        <!-- Nav para dispositivos com menos de 700px de largura -->
        <nav class="navMobile">
            <div class="containerLogo">
                <a href="{% url 'inicio' %}">
                    <img src="{% static 'img/logo.png' %}" title="Logo da Pulse Geek" alt="Logo">
                </a>
            </div>

            <div class="containerIcons">
                <a href="{% url 'pag-cadastro' %}"><img src="{% static 'img/icons/adicionar-usuario.png' %}"
                        alt="Icon Add Usuário" id="menuIcon"></a>
            </div>

            <div class="containerIcons">
                <a href="{% url 'pag-carrinho' %}"><img src="{% static 'img/icons/carrinhobranco.png' %}"
                        alt="Icon Carrinho"></a>
            </div>

            <div class="containerIcons">
                <img src="{% static 'img/icons/menubranco.png' %}" alt="Icon Menu" id="menuIconMobile">
                <div id="sideMenu" class="side-menu">
                    <ul>
                        <!-- Menu principal -->
                        <li class="menu-item" id="setaCards">
                            <span>CARDS</span>
                            <img src="{% static 'img/icons/seta2.png' %}" alt="Seta" class="menu-icon">
                        </li>
                        <!-- Submenu de CARDS -->
                        <ul class="submenu" id="subCards" style="display: none;font-size: 80%;">
                            <li>CARDS</li>
                            <li>DECKS</li>
                            <li>BOOSTER PACKS</li>
                            <li>EQUIPAMENTOS</li>
                        </ul>
                        <!-- Menu principal -->
                        <li class="menu-item" id="setaRPG">
                            <span>RPG</span>
                            <img src="{% static 'img/icons/seta2.png' %}" alt="Seta" class="menu-icon">
                        </li>
                        <!-- Submenu de RPG -->
                        <ul class="submenu" id="subRPG" style="display: none;font-size: 80%;">
                            <li>DADOS</li>
                            <li>LIVROS</li>
                            <li>ACESSÓRIOS</li>
                        </ul>
                        <li><a href="#">COLECIONÁVEIS</a></li>
                    </ul>
                </div>
            </div>

            <br>

            <div class="containerBusca">
                <input type="text" id="txtBuscaMobile" placeholder="Pesquisar..." />
                <div class="lupa">
                    <center>
                        <img src="{% static 'img/icons/lupa.png' %}" id="iconLupaMobile" alt="Ícone de Lupa">
                    </center>
                </div>
            </div>

        </nav>
    </header>

    <section class="carrinho" style="margin-top: 15px;">

        <div class="menu-122">
            <h1 class="tittleForm">MEU CARRINHO</h1>
        </div>

        <div class="menu-123">
            <p class="text-123">Produto</p>
            <div class="menu-valores">
                <p>Valor</p>
                <p>Qtd.</p>
            </div>
        </div>

        <div class="listDesejo">
            <img src="{% static 'img/produtos/podutos1.jpg' %}" alt="Produto">
            <div class="produto-descricao">
                <p class="text-123">Kit 7 Dados de RPG Azul com Dourado</p>
                <a class="remover-btn" href="#">Remover</a>
            </div>
            <div class="produto-detalhes">
                <label class="preco">R$50,01</label>
                <input type="number" class="quantidade-input" min="0" value="1">
            </div>
        </div>

        <div class="listDesejo">
            <img src="{% static 'img/produtos/podutos1.jpg' %}" alt="Produto">
            <div class="produto-descricao">
                <p class="text-123">Kit 7 Dados de RPG Azul com Dourado</p>
                <a class="remover-btn" href="#">Remover</a>
            </div>
            <div class="produto-detalhes">
                <label class="preco">R$100,00</label>
                <input type="number" class="quantidade-input" min="0" value="1">
            </div>
        </div>

        <div class="carrinho-total">
            <p>SubTotal</p>
            <div class="carrinho-total-sub">
                <label id="valor_parcial">R$000,00</label>
                <label id="qntd-produtos">2</label>
            </div>
        </div>

        <div class="carrinho-total">
            <p>Frete</p>
            <div class="carrinho-total-sub">
                <label id="valor_frete">R$10,00</label>
                <label>-</label>
            </div>
        </div>
        <div class="carrinho-total total-geral">
            <p>Total</p>
            <div class="carrinho-total-sub">
                <label id="valor_total">R$000,00</label>
                <label id="qntd-produtos-total">2</label>
            </div>
        </div>

        <div id="escolherEndereco">
            <!-- Endereços-->
            <center>
                <label style="color: #6A367E;  font-weight: bold;">Deseja utilizar um endereço salvo para o envio do
                    pedido?</label>
            </center>

            <div class="container_endereco">
                <div class="end-salvo">
                    <div class="address-info">
                        <div class="address">
                            <p class="name">Igor Amaral Beneti</p>
                            <p>R: Ovídio Vilela, 773 - Centro -</p>
                            <p>Restinga/SP</p>
                            <p>CEP: 14430-000</p>
                        </div>
                        <div class="links">
                            <a href="" class="link">Tornar padrão</a>
                            <a href="" class="link">Alterar</a>
                            <a href="" class="link danger">Excluir</a>
                        </div>
                    </div>
                    <div class="radio-container">
                        <input type="radio" name="radio-group" id="radio1" class="radio">
                    </div>
                </div>
            </div>

            <div class="container_endereco">
                <div class="end-salvo">
                    <div class="address-info">
                        <div class="address">
                            <p class="name">Igor Amaral Beneti</p>
                            <p>R: Ovídio Vilela, 773 - Centro -</p>
                            <p>Restinga/SP</p>
                            <p>CEP: 14430-000</p>
                        </div>
                        <div class="links">
                            <a href="" class="link">Tornar padrão</a>
                            <a href="" class="link">Alterar</a>
                            <a href="" class="link danger">Excluir</a>
                        </div>
                    </div>
                    <div class="radio-container">
                        <input type="radio" name="radio-group" id="radio2" class="radio">
                    </div>
                </div>
            </div>

            <center>
                <div class="button-container">
                    <button id="proximaEtapa" class="save-button">Proximo</button>
                </div>
            </center>
        </div>

        <!-- Formas de Pagamento-->
        <section id="formasPagamento" style="display: none;" class="Container_radio_pagamento">
            <p style="color: #181818;opacity: 90%;">Formas de pagamento</p>
            <div style="width: 100%; margin: 10px;margin-bottom: 40px;">
                <input type="radio" name="card-cred" id="radio-cartaoCredito" class="radio" checked>
                <label for="cartao_credito" class="met-pag-label">Cartão de crédito</label>
                <br>
                <p style="margin: 2.5% 0;"> </p>
                <input type="radio" name="card-cred" id="radio-boleto" class="radio">
                <label for="boleto" class="met-pag-label">Boleto</label>

                <input type="radio" name="card-cred" id="radio-pix" class="radio">
                <label for="pix" class="met-pag-label">Pix</label>
            </div>
        </section>

        <div id="cartaoCredito" style="display: none;">
            <p class="titulo">Cartões salvos</p>

            <p class="subtitulo">Pagar utilizando um cartão salvo?</p>
            <select class="select-cartao">
                <option>****8592</option>
            </select>

            <p class="titulo">Dados do Cartão de Crédito</p>
            <p class="subtitulo">Pagamento com cartão de crédito!</p>

            <div class="campo">
                <label>Número do Cartão de crédito</label>
                <input type="text" class="valor" placeholder="Número do Cartão de crédito">
            </div>

            <div class="end1">
                <div class="campo dat">
                    <label>Data de validade</label>
                    <input type="text" class="valor" placeholder="OO/OO">
                </div>
                <div class="campo cvv">
                    <label>CVV</label>
                    <input type="text" class="valor" placeholder="CVV">
                </div>
            </div>

            <div class="campo">
                <label>Nome do titular</label>
                <input type="text" class="valor" placeholder="Nome do titular">
            </div>

            <div class="campo">
                <label for="" class="parcelas-label">Parcelas</label>
                <select class="valor">
                    <option>1x</option>
                    <option>2x</option>
                    <option>3x</option>
                    <option>4x</option>
                    <option>5x</option>
                </select>
            </div>

            <center>
                <div class="button-container">
                    <button class="save-button">FINALIZAR PEDIDO</button>
                </div>
            </center>
        </div>

        <div id="boleto" style="display: none;">
            <center>
                <div class="button-container">
                    <button class="save-button">Gerar boleto</button>
                </div>
                <p class="textBoleto">O pedido será enviado em até 3 dias úteis após a
                    aprovação do pagamento.
                    Você pode acompanhar o andamento na aba “Meus Pedidos”.</p>
            </center>
        </div>

        <div id="pix" style="display: none;">
            <div style="display: flex;">
                <img src="{% static 'img/icons/qrcode-exemplo.png' %}" alt="" style="width: 200px;height: 200px;">
                <div>
                    <p class="textPIX">Aponte a câmera do celular para o QR Code!</p>
                </div>
                <div style="width: 100%;">
                    <center>
                        <a href="carrinho.html"><button class="save-button">COPIAR CÓDIGO PIX</button></a>
                    </center>
                </div>
            </div>
            <p class="textBoleto">Pagamento realizado com sucesso via PIX! Você
                pode
                acompanhar o status da sua compra na área “Meus Pedidos”.</p>
        </div>

        <div style="width: 100%;">
            <center>
                <a href="{% url 'pag-carrinho' %}"><button class="save-button">Voltar</button></a>
            </center>
        </div>

    </section>

    <footer class="footerDeck">
        <div class="footer-container">
            <div class="footer-coluna">
                <h3>DEPARTAMENTOS</h3>
                <p>Cards</p>
                <p>RPG</p>
                <p>Colecionáveis</p>

                <h3>INSTITUCIONAL</h3>
                <p>Sobre</p>
                <p>Termos e condições</p>

                <h3>FAQ</h3>
                <p>FAQ</p>
            </div>

            <div class="footer-coluna">
                <h3>ATENDIMENTO</h3>
                <p>Horário de atendimento:</p>
                <p>Segunda à Sexta: 08:00 às 20:00</p>
                <p>Sábado: 09:00 às 15:00</p>
                <p>Endereço:</p>
                <p>Rua Carlos Gomes, 132 - 9º andar - Centro</p>
                <p>Franca/SP - CEP: 14003-000</p>

                <h3>CENTRAL SAC</h3>
                <p>(16) 4444-4444</p>
            </div>

            <div class="footer-coluna">
                <h3>EMAIL PARA CONTATO</h3>
                <p>pulsegeek@gmail.com</p>

                <h3>REDES SOCIAIS</h3>
                <p>Instagram: @pulsegeek</p>

                <img src="{% static 'img/logo.png' %}" style="width: 150px; height: 100px;" title="Logo da Pulse Geek"
                    alt="Logo">
            </div>
        </div>
        <div class="footer-bottom">
            <p>Copyright 2024 Pulse Geek - Todos os direitos reservados. Imagens meramente ilustrativas.</p>
        </div>
    </footer>

    <footer class="footerMobile">
        <div class="footer-container">

            <div class="footer-coluna">
                <h3>ATENDIMENTO</h3>
                <p>Horário de atendimento:</p>
                <p>Segunda à Sexta: 08:00 às 20:00</p>
                <p>Sábado: 09:00 às 15:00</p>
                <p>Endereço:</p>
                <p>Rua Carlos Gomes, 132 - 9º andar - Centro</p>
                <p>Franca/SP - CEP: 14003- 000</p>

                <h3>CENTRAL SAC</h3>
                <p>(16) 4444-4444</p>

                <h3>EMAIL PARA CONTATO</h3>
                <p>pulsegeek@gmail.com</p>

                <h3>REDES SOCIAIS</h3>
                <p>Instagram: @pulsegeek</p>
            </div>

            <div class="footer-coluna">
                <h3>DEPARTAMENTOS</h3>
                <p>Cards</p>
                <p>RPG</p>
                <p>Colecionáveis</p>

                <h3>INSTITUCIONAL</h3>
                <p>Sobre</p>
                <p>Termos e condições</p>

                <h3>FAQ</h3>
                <p>FAQ</p>
                <img src="{% static 'img/logo.png' %}" style="width: 150px; height: 100px;" title="Logo da Pulse Geek"
                    alt="Logo">
            </div>
        </div>

        <div class="footer-bottom">
            <p style="font-size: 20px;">Copyright 2024 Pulse Geek - Todos os direitos reservados. Imagens meramente
                ilustrativas.</p>
        </div>
    </footer>

    <script src="{% static 'js/mainScript.js' %}"></script>
    <script src="{% static 'js/carrinho.js' %}"></script>
    <script>
        // Função para atualizar o subtotal de cada produto e o total geral
        function atualizarCarrinho() {
            // Seleciona todas as divs de produtos
            const listasDesejo = document.querySelectorAll('.listDesejo');

            let valorParcial = 0; // Variável para o total geral

            listasDesejo.forEach(lista => {
                // Seleciona os elementos dentro da lista atual
                const precoElemento = lista.querySelector('.preco');
                const freteElemento = document.getElementById('valor_frete');
                const inputQuantidade = lista.querySelector('.quantidade-input');

                // Obtém o preço e a quantidade
                const precoTexto = precoElemento.textContent.trim();
                const precoTextoFrete = freteElemento.textContent.trim();
                const precoNumerico = parseFloat(precoTexto.replace('R$', '').replace(',', '.')) || 0;
                const precoFrete = parseFloat(precoTextoFrete.replace('R$', '').replace(',', '.')) || 0;
                const quantidade = parseInt(inputQuantidade.value) || 0;

                // Calcula o subtotal do item
                const subtotal = precoNumerico * quantidade;

                // Adiciona ao total geral
                valorParcial += subtotal;
            });

            // Calcula o valor final, incluindo o frete
            const freteElemento = document.getElementById('valor_frete');
            const precoFrete = parseFloat(freteElemento.textContent.replace('R$', '').replace(',', '.')) || 0;
            const valorFinal = valorParcial + precoFrete;

            // Atualiza as labels com os valores calculados
            document.getElementById('valor_parcial').textContent = `R$${valorParcial.toFixed(2).replace('.', ',')}`;
            document.getElementById('valor_total').textContent = `R$${valorFinal.toFixed(2).replace('.', ',')}`;
        }

        // Adiciona eventos de "input" em todos os campos de quantidade
        document.querySelectorAll('.quantidade-input').forEach(input => {
            input.addEventListener('input', atualizarCarrinho);
        });

        // Inicializa os cálculos ao carregar a página
        document.addEventListener('DOMContentLoaded', atualizarCarrinho);
    </script>

</body>

</html>